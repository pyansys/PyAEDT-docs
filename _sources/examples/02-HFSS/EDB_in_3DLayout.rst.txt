
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples\02-HFSS\EDB_in_3DLayout.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_02-HFSS_EDB_in_3DLayout.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_02-HFSS_EDB_in_3DLayout.py:


HFSS 3D Layout: PCB and EDB in 3D layout
----------------------------------------
This example shows how to use HFSS 3D Layout combined with EDB to interact with a 3D layout.

.. GENERATED FROM PYTHON SOURCE LINES 6-19

.. code-block:: default



    import os
    import tempfile
    from pyaedt import generate_unique_name

    tmpfold = tempfile.gettempdir()
    temp_folder = os.path.join(tmpfold, generate_unique_name("Example"))
    if not os.path.exists(temp_folder):
        os.makedirs(temp_folder)
    print(temp_folder)






.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    D:\Temp\Example_KUXG89




.. GENERATED FROM PYTHON SOURCE LINES 20-23

Copy example into temporary folder
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Copy an example into the temporary folder.

.. GENERATED FROM PYTHON SOURCE LINES 23-33

.. code-block:: default


    from pyaedt import Desktop
    from pyaedt import Hfss3dLayout
    from pyaedt import examples


    targetfile = examples.download_aedb()
    print(targetfile)
    aedt_file = targetfile[:-12] + "aedt"





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    D:\Temp\PyAEDTExamples\edb/Galileo.aedb\edb.def




.. GENERATED FROM PYTHON SOURCE LINES 34-37

Set non-graphical mode
~~~~~~~~~~~~~~~~~~~~~~
Set non-graphical mode. The default is ``False``.

.. GENERATED FROM PYTHON SOURCE LINES 37-41

.. code-block:: default


    non_graphical = os.getenv("PYAEDT_NON_GRAPHICAL", "False").lower() in ("true", "1", "t")
    NewThread = True








.. GENERATED FROM PYTHON SOURCE LINES 42-45

Launch AEDT
~~~~~~~~~~~
Launch AEDT 2022R2 in graphical mode using SI units.

.. GENERATED FROM PYTHON SOURCE LINES 45-49

.. code-block:: default


    desktopVersion = "2022.2"









.. GENERATED FROM PYTHON SOURCE LINES 50-54

Initialize AEDT and launch HFSS 3D Layout
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Initialize AEDT and launch HFSS 3D Layout.
The ``h3d`` object contains the :class:`pyaedt.Edb` class query methods.

.. GENERATED FROM PYTHON SOURCE LINES 54-62

.. code-block:: default


    d = Desktop(desktopVersion, non_graphical, NewThread)
    if os.path.exists(aedt_file):
        os.remove(aedt_file)
    h3d = Hfss3dLayout(targetfile)
    h3d.save_project(os.path.join(temp_folder, "edb_demo.aedt"))






.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    pyaedt info: Logger Started
    pyaedt info: Launching PyAEDT outside AEDT with CPython and PythonNET.
    pyaedt info: AEDT installation Path C:\Program Files\AnsysEM\v222\Win64.
    pyaedt info: Launching AEDT with module PythonNET.
    pyaedt info: Ansoft.ElectronicsDesktop.2022.2 Started with process ID 7340.
    pyaedt info: Logger file D:\Temp\pyaedt20220722_091734.log in use.
    pyaedt info: pyaedt v0.5.9
    pyaedt info: Python version 3.8.10 (tags/v3.8.10:3d8993a, May  3 2021, 11:48:03) [MSC v.1928 64 bit (AMD64)]
    pyaedt info: EDB folder D:\Temp\PyAEDTExamples\edb/Galileo.aedb\edb.def has been imported to project Galileo
    pyaedt info: Active Design set to Galileo_um
    pyaedt info: Aedt Objects initialized
    pyaedt info: Variable Manager initialized
    pyaedt info: Design Loaded
    pyaedt info: Successfully loaded project materials !
    pyaedt info: Materials Loaded
    pyaedt info: aedt file load time 0.07818722724914551
    pyaedt info: Analysis Loaded
    pyaedt info: Loading Modeler.
    pyaedt info: Modeler loaded.
    pyaedt info: EDB loaded.
    pyaedt info: Layers loaded.
    pyaedt info: Primitives loaded.
    pyaedt info: Modeler Loaded
    pyaedt info: Project edb_demo Saved correctly

    True



.. GENERATED FROM PYTHON SOURCE LINES 63-66

Print boundaries
~~~~~~~~~~~~~~~~
Print boundaries from the ``setups``` object.

.. GENERATED FROM PYTHON SOURCE LINES 66-69

.. code-block:: default


    h3d.boundaries





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    []



.. GENERATED FROM PYTHON SOURCE LINES 70-73

Hide all nets
~~~~~~~~~~~~~
Hide all nets.

.. GENERATED FROM PYTHON SOURCE LINES 73-76

.. code-block:: default


    h3d.modeler.change_net_visibility(visible=False)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 77-80

Show only two nets
~~~~~~~~~~~~~~~~~~
Show only the two specified nets.

.. GENERATED FROM PYTHON SOURCE LINES 80-85

.. code-block:: default


    h3d.modeler.change_net_visibility(["A0_GPIO", "A0_MUX"], visible=True)
    edb = h3d.modeler.edb
    edb.core_nets.plot(["A0_GPIO", "A0_MUX"])




.. image-sg:: /examples/02-HFSS/images/sphx_glr_EDB_in_3DLayout_001.png
   :alt: Galileo_um
   :srcset: /examples/02-HFSS/images/sphx_glr_EDB_in_3DLayout_001.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    pyaedt info: Logger is initialized in EDB.
    pyaedt info: EDB Path D:/Temp/Example_KUXG89/edb_demo.aedb
    pyaedt info: EDB Version 2022.2
    pyaedt info: EDB Standalone True
    pyaedt info: Database Opened
    pyaedt info: Cell Galileo_um Opened
    pyaedt info: C:\actions-runner\_work\PyAEDT\PyAEDT\pyaedt\dlls\EDBLib
    pyaedt info: Refreshing the Components dictionary.
    pyaedt info: Objects Initialized
    pyaedt info: Builder was initialized.
    pyaedt info: EDB was initialized.
    pyaedt info: Primitives Updated
    pyaedt info: Nets Point Generation time 3.72 seconds




.. GENERATED FROM PYTHON SOURCE LINES 86-89

Show all layers
~~~~~~~~~~~~~~~
Show all layers.

.. GENERATED FROM PYTHON SOURCE LINES 89-96

.. code-block:: default


    layers = h3d.modeler.layers.all_signal_layers
    for lay in layers:
        layer = h3d.modeler.layers.layers[h3d.modeler.layers.layer_id(lay)]
        layer.IsVisible = True
        layer.update_stackup_layer()








.. GENERATED FROM PYTHON SOURCE LINES 97-100

Change layer color
~~~~~~~~~~~~~~~~~~
Change the layer color.

.. GENERATED FROM PYTHON SOURCE LINES 100-105

.. code-block:: default


    layer = h3d.modeler.layers.layers[h3d.modeler.layers.layer_id("TOP")]
    layer.set_layer_color(0, 255, 0)
    h3d.modeler.fit_all()








.. GENERATED FROM PYTHON SOURCE LINES 106-111

Disable component visibility
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Disable component visibility for ``"TOP"`` and ``"BOTTOM"``.
The :func:`pyaedt.modules.LayerStackup.Layer.update_stackup_layer` method
applies modifications to the layout.

.. GENERATED FROM PYTHON SOURCE LINES 111-120

.. code-block:: default


    top = h3d.modeler.layers.layers[h3d.modeler.layers.layer_id("TOP")]
    top.IsVisibleComponent = False
    top.update_stackup_layer()

    bot = h3d.modeler.layers.layers[h3d.modeler.layers.layer_id("BOTTOM")]
    bot.IsVisibleComponent = False
    bot.update_stackup_layer()





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    True



.. GENERATED FROM PYTHON SOURCE LINES 121-128

.. code-block:: default


    # Fit all
    # ~~~~~~~
    # Fit all so that you can visualize all.

    h3d.modeler.fit_all()








.. GENERATED FROM PYTHON SOURCE LINES 129-134

Close AEDT
~~~~~~~~~~
After the simulaton completes, you can close AEDT or release it using the
:func:`pyaedt.Desktop.release_desktop` method.
All methods provide for saving the project before closing.

.. GENERATED FROM PYTHON SOURCE LINES 134-138

.. code-block:: default


    if os.name != "posix":
        h3d.close_project()
        d.release_desktop()




.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    pyaedt info: Closing the AEDT Project edb_demo
    pyaedt info: Project edb_demo closed correctly





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  15.981 seconds)


.. _sphx_glr_download_examples_02-HFSS_EDB_in_3DLayout.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: EDB_in_3DLayout.py <EDB_in_3DLayout.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: EDB_in_3DLayout.ipynb <EDB_in_3DLayout.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
